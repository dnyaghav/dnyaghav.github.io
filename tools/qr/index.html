<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Advanced QR Code Generator | Free Online Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Generate customizable QR codes for Text, URL, Wi-Fi, vCard, SMS, and Email. Add a logo, choose style, and download in PNG, JPEG, SVG, or WebP." />
  <meta name="author" content="Mr. Aghav" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Icons (optional) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <!-- QR Styling -->
  <script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>
</head>
<body class="bg-light text-dark">

<div class="container py-4">

  <!-- HERO -->
  <div class="rounded-3 text-white p-4 mb-4" style="background: linear-gradient(90deg,#0ea5a4 0%,#3b82f6 100%);">
    <div class="row align-items-center">
      <div class="col-md-8">
        <h1 class="h4 mb-1">Advanced QR Code Generator</h1>
        <p class="mb-0">Text/URL, Wi-Fi, vCard, SMS, Email â€¢ Logo â€¢ ECC â€¢ Styles â€¢ Instant downloads</p>
      </div>
      <div class="col-md-4 text-md-end mt-3 mt-md-0">
        <span class="px-3 py-2 rounded-pill fw-semibold shadow-sm">ðŸš€ Free â€¢ No Signup</span>
      </div>
    </div>
  </div>

  <div class="row g-4 align-items-stretch">
    <!-- LEFT -->
    <div class="col-lg-7 d-flex">
      <div class="card shadow-sm w-100 h-100">
        <div class="card-body">

          <!-- Tabs -->
          <ul class="nav nav-tabs mb-3" id="qrTab" role="tablist">
            <li class="nav-item"><button class="nav-link active" id="tab-text" data-bs-toggle="tab" data-bs-target="#pane-text" type="button">Text / URL</button></li>
            <li class="nav-item"><button class="nav-link" id="tab-wifi" data-bs-toggle="tab" data-bs-target="#pane-wifi" type="button">Wi-Fi</button></li>
            <li class="nav-item"><button class="nav-link" id="tab-vcard" data-bs-toggle="tab" data-bs-target="#pane-vcard" type="button">vCard</button></li>
            <li class="nav-item"><button class="nav-link" id="tab-sms" data-bs-toggle="tab" data-bs-target="#pane-sms" type="button">SMS</button></li>
            <li class="nav-item"><button class="nav-link" id="tab-email" data-bs-toggle="tab" data-bs-target="#pane-email" type="button">Email</button></li>
          </ul>

          <div class="tab-content">
            <!-- Text / URL -->
            <div class="tab-pane fade show active" id="pane-text" role="tabpanel">
              <label class="form-label">Text or URL</label>
              <textarea id="textContent" class="form-control" rows="3" placeholder="Enter text or a link"></textarea>
            </div>

            <!-- Wi-Fi -->
            <div class="tab-pane fade" id="pane-wifi" role="tabpanel">
              <div class="mb-2"><input id="wifiSsid" class="form-control" placeholder="SSID (Network name)" /></div>
              <div class="mb-2"><input id="wifiPass" class="form-control" placeholder="Password" /></div>
              <div class="mb-2">
                <select id="wifiAuth" class="form-select">
                  <option value="WPA">WPA/WPA2/WPA3</option>
                  <option value="WEP">WEP</option>
                  <option value="nopass">Open</option>
                </select>
              </div>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="wifiHidden" />
                <label class="form-check-label" for="wifiHidden">Hidden network</label>
              </div>
            </div>

            <!-- vCard -->
            <div class="tab-pane fade" id="pane-vcard" role="tabpanel">
              <div class="mb-2"><input id="vFirst" class="form-control" placeholder="First name" /></div>
              <div class="mb-2"><input id="vLast" class="form-control" placeholder="Last name" /></div>
              <div class="mb-2"><input id="vPhone" class="form-control" placeholder="Phone" /></div>
              <div class="mb-2"><input id="vEmail" class="form-control" placeholder="Email" /></div>
              <div class="mb-2"><input id="vOrg" class="form-control" placeholder="Company" /></div>
              <div class="mb-2"><input id="vTitle" class="form-control" placeholder="Title" /></div>
              <div class="mb-2"><input id="vAddr" class="form-control" placeholder="Address" /></div>
              <div class="mb-2"><input id="vUrl" class="form-control" placeholder="Website (https://)" /></div>
            </div>

            <!-- SMS -->
            <div class="tab-pane fade" id="pane-sms" role="tabpanel">
              <div class="mb-2"><input id="smsTo" class="form-control" placeholder="Phone number" /></div>
              <div class="mb-2"><textarea id="smsMsg" class="form-control" rows="2" placeholder="Message"></textarea></div>
            </div>

            <!-- Email -->
            <div class="tab-pane fade" id="pane-email" role="tabpanel">
              <div class="mb-2"><input id="emTo" class="form-control" placeholder="Recipient" /></div>
              <div class="mb-2"><input id="emSubject" class="form-control" placeholder="Subject" /></div>
              <div class="mb-2"><textarea id="emBody" class="form-control" rows="2" placeholder="Body"></textarea></div>
            </div>
          </div>

          <hr class="my-3" />

          <!-- Options -->
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Size</label>
              <select id="size" class="form-select">
                <option value="300" selected>300 x 300</option>
                <option value="600">600 x 600</option>
                <option value="900">900 x 900</option>
                <option value="1200">1200 x 1200</option>
              </select>
            </div>
            <div class="col-md-4">
              <label class="form-label">Margin</label>
              <input type="number" id="margin" class="form-control" value="10" min="0" max="50" />
            </div>
            <div class="col-md-4">
              <label class="form-label">Error Correction</label>
              <select id="ecc" class="form-select">
                <option value="L">L</option>
                <option value="M" selected>M</option>
                <option value="Q">Q</option>
                <option value="H">H</option>
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label">QR Style</label>
              <select id="qrStyle" class="form-select">
                <option value="square">Square</option>
                <option value="dots" selected>Dots</option>
                <option value="rounded">Rounded</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">Logo Size</label>
              <input type="range" id="logoSize" class="form-range" min="0.1" max="0.5" step="0.05" value="0.3" />
            </div>
            <div class="col-12">
              <label class="form-label">Custom Logo (optional)</label>
              <input type="file" id="logoUpload" class="form-control" />
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="col-lg-5 d-flex">
      <div class="card shadow-sm w-100 h-100">
        <div class="card-body text-center d-flex flex-column">
          <h6 class="mb-1">Preview</h6>
          <p class="text-muted small mb-2" id="sizeInfo">Selected size: 300 x 300 px</p>

          <!-- Fixed preview 300x300, centered, overflow-hidden; QR scales inside -->
          <div class="mx-auto bg-white rounded shadow-sm p-3 overflow-hidden d-flex justify-content-center align-items-center"
               style="width:300px; height:300px;">
            <div id="qrWrap"
                 class="w-100 h-100 d-flex justify-content-center align-items-center"
                 style="transform-origin:center center;"></div>
          </div>

          <p class="mt-2"><span class="badge bg-light text-dark" id="livePayload">Payload preview</span></p>

          <hr />
          <h6 class="mb-2">Download</h6>
          <div class="d-flex flex-wrap justify-content-center gap-2">
            <button class="btn btn-sm btn-primary rounded-pill" onclick="downloadQR('png')">PNG</button>
            <button class="btn btn-sm btn-success rounded-pill" onclick="downloadQR('jpeg')">JPEG</button>
            <button class="btn btn-sm btn-warning rounded-pill" onclick="downloadQR('svg')">SVG</button>
            <button class="btn btn-sm btn-danger rounded-pill" onclick="downloadQR('webp')">WebP</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="text-center text-muted mt-4 small">Built by Mr. Aghav â€¢ Free QR Generator Tool</footer>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // ---------- Helpers ----------
  function sanitizeFilename(name) {
    return name
      .replace(/^https?:\/\//i, "")   // strip protocol
      .replace(/^www\./i, "")         // strip www.
      .replace(/[^a-z0-9\-]+/gi, "_") // keep letters, numbers, hyphen; others -> _
      .replace(/_+/g, "_")            // collapse multiple _
      .replace(/^_+|_+$/g, "");       // trim
  }

  function buildWifi({ ssid, pass, auth, hidden }) {
    return `WIFI:T:${auth};S:${ssid};P:${pass}${hidden ? ";H:true" : ""};;`;
  }
  function buildVCard(v) {
    return `BEGIN:VCARD
VERSION:3.0
N:${v.last||""};${v.first||""};;;
FN:${[v.first,v.last].filter(Boolean).join(" ")}
${v.org?`ORG:${v.org}`:""}
${v.title?`TITLE:${v.title}`:""}
${v.phone?`TEL:${v.phone}`:""}
${v.email?`EMAIL:${v.email}`:""}
${v.addr?`ADR:;;${v.addr}`:""}
${v.url?`URL:${v.url}`:""}
END:VCARD`.trim();
  }
  function buildSMS(to, msg) { return `SMSTO:${to}:${msg}`; }
  function buildEmail(to, subject, body) {
    const qp = [];
    if (subject) qp.push(`subject=${encodeURIComponent(subject)}`);
    if (body) qp.push(`body=${encodeURIComponent(body)}`);
    return `mailto:${to}${qp.length ? "?" + qp.join("&") : ""}`;
  }

  function currentPayload() {
    const active = document.querySelector('#qrTab .nav-link.active').id;
    switch (active) {
      case "tab-wifi":  return buildWifi({ ssid: wifiSsid.value, pass: wifiPass.value, auth: wifiAuth.value, hidden: wifiHidden.checked });
      case "tab-vcard": return buildVCard({ first: vFirst.value, last: vLast.value, phone: vPhone.value, email: vEmail.value, org: vOrg.value, title: vTitle.value, addr: vAddr.value, url: vUrl.value });
      case "tab-sms":   return buildSMS(smsTo.value, smsMsg.value);
      case "tab-email": return buildEmail(emTo.value, emSubject.value, emBody.value);
      default:          return textContent.value;
    }
  }

  // ---------- QR instance ----------
  let currentLogo = null;
  const qr = new QRCodeStyling({
    width: 300,
    height: 300,
    data: "",
    margin: 10,
    qrOptions: { errorCorrectionLevel: "M" },
    dotsOptions: { type: "dots", color: "#000" },
    backgroundOptions: { color: "#fff" }
  });
  qr.append(document.getElementById("qrWrap"));

  // ---------- Update preview ----------
  function updateQR() {
    const sizeVal = parseInt(document.getElementById("size").value) || 300;
    const marginVal = parseInt(document.getElementById("margin").value) || 10;
    const eccVal = document.getElementById("ecc").value;
    const styleVal = document.getElementById("qrStyle").value;
    const logoSizeVal = parseFloat(document.getElementById("logoSize").value) || 0.3;
    const data = currentPayload();

    // Update info labels
    document.getElementById("sizeInfo").textContent = `Selected size: ${sizeVal} x ${sizeVal} px`;
    document.getElementById("livePayload").textContent = data ? (data.length > 90 ? data.slice(0, 90) + "..." : data) : "Payload preview";

    // Update QR
    qr.update({
      width: sizeVal,
      height: sizeVal,
      margin: marginVal,
      data,
      qrOptions: { errorCorrectionLevel: eccVal },
      dotsOptions: { type: styleVal, color: "#000" },
      image: currentLogo,
      imageOptions: { crossOrigin: "anonymous", imageSize: logoSizeVal }
    });

    // Scale canvas into fixed 300x300 preview (no overflow)
    const scale = Math.min(1, 300 / sizeVal);
    document.getElementById("qrWrap").style.transform = `scale(${scale})`;
  }

  // ---------- Download (dynamic safe filenames incl. size) ----------
  function downloadQR(ext) {
    const sizeVal = parseInt(document.getElementById("size").value) || 300;
    let filename = "qr-code";
    const active = document.querySelector('#qrTab .nav-link.active').id;

    if (active === "tab-wifi") {
      filename = wifiSsid.value ? `wifi-${wifiSsid.value}` : "wifi-qr";
    } else if (active === "tab-vcard") {
      const namePart = [vFirst.value, vLast.value].filter(Boolean).join("-");
      filename = namePart ? `vcard-${namePart}` : "vcard-qr";
    } else if (active === "tab-sms") {
      filename = smsTo.value ? `sms-${smsTo.value}` : "sms-qr";
    } else if (active === "tab-email") {
      filename = emTo.value ? `email-${emTo.value}` : "email-qr";
    } else {
      filename = textContent.value ? textContent.value.slice(0, 60) : "text-qr";
    }

    filename = sanitizeFilename(filename) + `-${sizeVal}x${sizeVal}`;

    qr.download({
      extension: ext,
      width: sizeVal,
      height: sizeVal,
      name: filename
    });
  }

  // ---------- Logo upload ----------
  document.getElementById("logoUpload").addEventListener("change", (e) => {
    const file = e.target.files && e.target.files[0];
    if (!file) { currentLogo = null; updateQR(); return; }
    const reader = new FileReader();
    reader.onload = () => { currentLogo = reader.result; updateQR(); };
    reader.readAsDataURL(file);
  });

  // ---------- Random default link on refresh only ----------
  (function setRandomDefaultOnLoad(){
    const defaults = [
      "https://www.instagram.com/mr.aghav",
      "https://www.youtube.com/@dnyaghav",
      "https://dnyaghav.github.io/"
    ];
    const idx = Math.floor(Math.random() * defaults.length);
    const textarea = document.getElementById("textContent");
    textarea.value = defaults[idx];
  })();

  // ---------- Event bindings ----------
  // update on any input change
  document.querySelectorAll("input, textarea, select").forEach(el => {
    el.addEventListener("input", updateQR);
  });
  // update when switching tabs
  document.querySelectorAll('#qrTab .nav-link').forEach(el => {
    el.addEventListener('shown.bs.tab', updateQR, { once: false });
  });

  // Initial render
  updateQR();
</script>
</body>
</html>
